<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rive Parser Test</title>

        <!-- Golden Layout CSS (CDN) -->
        <link href="https://unpkg.com/golden-layout@1.5.9/src/css/goldenlayout-base.css" rel="stylesheet" type="text/css">
        <link href="https://unpkg.com/golden-layout@1.5.9/src/css/goldenlayout-dark-theme.css" rel="stylesheet" type="text/css">
        
        <!-- JSONEditor CSS -->
        <link href="./node_modules/jsoneditor/dist/jsoneditor.min.css" rel="stylesheet" type="text/css">
        
        <!-- Link to our custom stylesheet -->
        <link rel="stylesheet" href="src/styles/style.css">
    </head>

    <body class="jsoneditor-dark">
        <!-- Golden Layout Container -->
        <div id="goldenLayoutContainer"></div>
        
        <!-- Hidden templates for Golden Layout components -->
        <div id="componentTemplates" style="display: none;">
            <!-- Controls Template -->
            <div id="controlsTemplate">
                <div class="controls-container">
                    <!-- File Controls -->
                    <div class="control-section file-section">
                        <div class="file-group">
                            <div>
                                <input type="file" id="riveFilePicker" accept=".riv" class="file-input" placeholder="Select .riv file">
                                <button id="clearFileBtn" class="clear-file-btn" title="Clear current file">Clear</button>
                            </div>
                            <div id="fileSelectedIndicator" class="file-selected-indicator" style="display: none;">
                                <span id="selectedFileName">No file selected</span>
                                <button id="changeFileBtn" class="change-file-btn" title="Change file">Change</button>
                            </div>
                        </div>
                    </div>

                    <!-- Animation Controls -->
                    <div class="control-section animation-section">
                        <div class="animation-controls-grid">
                            <div class="control-row">
                                <select id="artboardSelector" class="select-input" title="Artboard">
                                    <option value="">No file loaded</option>
                                </select>
                                <button id="applySelectionBtn" class="apply-btn">Apply</button>
                            </div>
                            
                            <div class="control-row">
                                <select id="animationSelector" class="select-input" title="Timeline">
                                    <option value="">No timelines</option>
                                </select>
                                <div class="inline-controls">
                                    <button id="toggleTimelineBtn" class="toggle-btn" data-state="stopped">Play</button>
                                    <button id="pauseTimelineBtn" class="pause-btn" data-state="unpaused">‚è∏</button>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <select id="stateMachineSelector" class="select-input" title="State Machine">
                                    <option value="">No state machines</option>
                                </select>
                                <div class="inline-controls">
                                    <button id="toggleStateMachineBtn" class="toggle-btn" data-state="stopped">Play</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Layout & Display Settings -->
                    <div class="control-section display-section">
                        <div class="display-controls-grid">
                            <div class="control-row bg-row">
                                <div class="bg-color-container">
                                    <input type="color" id="canvasBackgroundColor" value="#252525" class="color-input">
                                    <span class="bg-color-label">Background Color</span>
                                </div>
                            </div>
                            
                            <div class="control-row layout-row">
                                <select id="riveFitSelect" class="select-input" title="Fit Mode">
                                    <option value="contain">Contain</option>
                                    <option value="cover">Cover</option>
                                    <option value="fill">Fill</option>
                                    <option value="fitWidth">Fit Width</option>
                                    <option value="fitHeight">Fit Height</option>
                                    <option value="scaleDown">Scale Down</option>
                                    <option value="none">None</option>
                                    <option value="layout">Layout</option>
                                </select>
                                <select id="riveAlignmentSelect" class="select-input" title="Alignment">
                                    <option value="center">Center</option>
                                    <option value="topLeft">Top Left</option>
                                    <option value="topCenter">Top Center</option>
                                    <option value="topRight">Top Right</option>
                                    <option value="centerLeft">Center Left</option>
                                    <option value="centerRight">Center Right</option>
                                    <option value="bottomLeft">Bottom Left</option>
                                    <option value="bottomCenter">Bottom Center</option>
                                    <option value="bottomRight">Bottom Right</option>
                                </select>
                                <input type="number" id="layoutScaleInput" class="number-input" min="0.1" max="5" step="0.1" value="1" title="Layout Scale">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Canvas Template -->
            <div id="canvasTemplate">
                <div id="canvasContainer">
                    <canvas id="rive-canvas"></canvas>
                </div>
            </div>

            <!-- Dynamic Controls Template -->
            <div id="dynamicControlsTemplate">
                <div id="dynamicControlsContainer">
                    <p>Please Load a Rive File</p>
                </div>
            </div>

            <!-- JSON Inspector Template -->
            <div id="jsonInspectorTemplate">
                <div id="output"></div> <!-- JSONEditor goes here -->
            </div>
        </div>

        <!-- Status Message -->
        <p class="log-message" id="statusMessage">Please select a Rive file to begin parsing.</p>

        <!-- Load the Rive runtime -->
        <script src="./node_modules/@rive-app/webgl2/rive.js"></script>
        
        <!-- jQuery (required by Golden Layout v1.5.9) -->
        <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>
        
        <!-- Golden Layout JS (CDN) -->
        <script src="https://unpkg.com/golden-layout@1.5.9/dist/goldenlayout.min.js"></script>
        
        <!-- JSONEditor JS (Ensure it's loaded before scripts that use it) -->
        <script src="./node_modules/jsoneditor/dist/jsoneditor.min.js"></script>

        <!-- Logging System Scripts -->
        <script type="module" src="src/utils/debugger/debugLogger.js"></script>
        <script type="module" src="src/utils/debugger/logConfig.js"></script>
        <script type="module" src="src/utils/debugger/parser-logger.js"></script>
        <script type="module" src="src/utils/debugger/debugQuickSet.js"></script>

        <!-- Core Scripts -->
        <script src="src/components/parser.js"></script>
        <script type="module" src="src/components/goldenLayoutManager.js"></script>
        <script type="module" src="src/components/riveParserHandler.js"></script>
        <script type="module" src="src/components/riveControlInterface.js"></script>

        <!-- Debug Controls -->
        <script type="module" src="src/utils/debugger/debugControl.js"></script>
    </body>

</html>